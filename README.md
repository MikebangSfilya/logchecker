# logchecker

Линтер для различных мелких проверок логов по опред правилам: логи должны быть написаны на английском, начинаться с маленькой буквы, отсутствие спецсимволов и эмодзи и чувствительных данных. 

Поддерживает стандартный log, slog и zap от убер.

## Правила валидации

Анализатор проверяет строковые аргументы в методах логирования (Info, Error, Warn, Debug, Fatal и их Context-варианты):

- Регистр: Сообщение должно начинаться со строчной буквы.
- Язык: Допускается использование только английского языка (ASCII символы).
- Спецсимволы и эмодзи: Запрещено использование эмодзи, восклицательных/вопросительных знаков и точек в определенных позициях.
- Чувствительные данные: Поиск утечек секретов (пароли, токены, API-ключи) как в самих строках, так и в именах передаваемых переменных.

---

1. Установка как самостоятельной утилиты

Вы можете скомпилировать линтер и использовать его напрямую без golangci-lint.

Сборка бинарного файла:
Находясь в корне проекта, выполните команду:

```Bash
go build -o logchecker ./cmd/logchecker/main.go
    
# Для проверки кода в текущей директории и всех подпапках:
./logchecker ./...

``` 

2. Использование в качестве плагина для golangci-lint

Линтер поддерживает интеграцию с golangci-lint через механизм плагинов.

Сборка плагина:
Скомпилируйте файл плагина с флагом -buildmode=plugin:

```
go build -buildmode=plugin -o logchecker.so ./plugin/plugin.go
```

Настройка .golangci.yml:
Добавьте путь к созданному файлу .so в конфигурацию вашего проекта:

```YAML

    linters-settings:
      custom:
        logchecker:
          path: ./logchecker.so
          description: check the logs
          original-url: github.com/MikebangSfilya/logchecker

    linters:
      enable:
        - logchecker

```
Запуск:

```

golangci-lint run
```

## Тестирование

Проект включает в себя unit-тесты логики и интеграционные тесты на базе testdata.
Запуск всех тестов:
Bash

go test ./...